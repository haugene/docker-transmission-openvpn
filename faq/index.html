
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="http://haugene.github.io/docker-transmission-openvpn/faq/">
      
      
        <link rel="prev" href="../config-options/">
      
      
        <link rel="next" href="../debug/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.2.7">
    
    
      
        <title>Frequently asked questions - docker-transmission-openvpn</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.046329b4.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#the_container_runs_but_i_cant_access_the_web_ui" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="docker-transmission-openvpn" class="md-header__button md-logo" aria-label="docker-transmission-openvpn" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            docker-transmission-openvpn
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Frequently asked questions
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/haugene/docker-transmission-openvpn/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="docker-transmission-openvpn" class="md-nav__button md-logo" aria-label="docker-transmission-openvpn" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    docker-transmission-openvpn
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/haugene/docker-transmission-openvpn/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../building-blocks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Image Building Blocks
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../vpn-networking/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    VPN and Networking
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../run-container/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Running the container
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../supported-providers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Supported providers
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../provider-specific/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Provider specific settings
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../config-options/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration options
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Frequently asked questions
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Frequently asked questions
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#the_container_runs_but_i_cant_access_the_web_ui" class="md-nav__link">
    The container runs, but I can't access the web UI
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how_do_i_enable_authentication_in_the_web_ui" class="md-nav__link">
    How do I enable authentication in the web UI
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how_do_i_verify_that_my_traffic_is_using_vpn" class="md-nav__link">
    How do I verify that my traffic is using VPN
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rtnetlink_answers_file_exists" class="md-nav__link">
    RTNETLINK answers: File exists
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rtnetlink_answers_invalid_argument" class="md-nav__link">
    RTNETLINK answers: Invalid argument
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tunsetiff_tun_operation_not_permitted" class="md-nav__link">
    TUNSETIFF tun: Operation not permitted
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#error_resolving_host_address" class="md-nav__link">
    Error resolving host address
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#container_loses_connection_after_some_time" class="md-nav__link">
    Container loses connection after some time
  </a>
  
    <nav class="md-nav" aria-label="Container loses connection after some time">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#set_the_ping-exit_option_for_openvpn_and_restart-flag_in_docker" class="md-nav__link">
    Set the ping-exit option for OpenVPN and restart-flag in Docker
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use_a_third-party_tool_to_monitor_and_restart_the_container" class="md-nav__link">
    Use a third-party tool to monitor and restart the container
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#send_username_and_password_via_a_file" class="md-nav__link">
    Send Username and Password via a file
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#auth_received_control_message_auth_failed" class="md-nav__link">
    AUTH: Received control message: AUTH_FAILED
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../debug/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Debug your setup
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../tips-tricks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tips & Tricks
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../rss-plugin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    RSS plugin
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../web-proxy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Web Proxy
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#the_container_runs_but_i_cant_access_the_web_ui" class="md-nav__link">
    The container runs, but I can't access the web UI
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how_do_i_enable_authentication_in_the_web_ui" class="md-nav__link">
    How do I enable authentication in the web UI
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how_do_i_verify_that_my_traffic_is_using_vpn" class="md-nav__link">
    How do I verify that my traffic is using VPN
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rtnetlink_answers_file_exists" class="md-nav__link">
    RTNETLINK answers: File exists
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rtnetlink_answers_invalid_argument" class="md-nav__link">
    RTNETLINK answers: Invalid argument
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tunsetiff_tun_operation_not_permitted" class="md-nav__link">
    TUNSETIFF tun: Operation not permitted
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#error_resolving_host_address" class="md-nav__link">
    Error resolving host address
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#container_loses_connection_after_some_time" class="md-nav__link">
    Container loses connection after some time
  </a>
  
    <nav class="md-nav" aria-label="Container loses connection after some time">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#set_the_ping-exit_option_for_openvpn_and_restart-flag_in_docker" class="md-nav__link">
    Set the ping-exit option for OpenVPN and restart-flag in Docker
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use_a_third-party_tool_to_monitor_and_restart_the_container" class="md-nav__link">
    Use a third-party tool to monitor and restart the container
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#send_username_and_password_via_a_file" class="md-nav__link">
    Send Username and Password via a file
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#auth_received_control_message_auth_failed" class="md-nav__link">
    AUTH: Received control message: AUTH_FAILED
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


  <h1>Frequently asked questions</h1>

<ul>
<li><a href="#the_container_runs_but_i_cant_access_the_web_UI">The container runs, but I can't access the web ui</a></li>
<li><a href="#how_do_i_enable_authentication_in_the_web_UI">How do I enable authentication in the web ui</a></li>
<li><a href="#how_do_i_verify_that_my_traffic_is_using_vpn">How do I verify that my traffic is using VPN</a></li>
<li><a href="#rtnetlink_answers_file_exists">RTNETLINK answers: File exists</a></li>
<li><a href="#rtnetlink_answers_invalid_argument">RTNETLINK answers: Invalid argument</a></li>
<li><a href="#tunsetiff_tun_operation_not_permitted">TUNSETIFF tun: Operation not permitted</a></li>
<li><a href="#error_resolving_host_address">Error resolving host address</a></li>
<li><a href="#container_loses_connection_after_some_time">Container loses connection after some time</a></li>
<li><a href="#set_the_ping-exit_option_for_openvpn_and_restart-flag_in_docker">Set the ping-exit option for OpenVPN and restart-flag in Docker</a></li>
<li><a href="#use_a_third-party_tool_to_monitor_and_restart_the_container">Use a third-party tool to monitor and restart the container</a></li>
<li><a href="#send_username_and_password_via_a_file">Send Username Password via file</a></li>
<li><a href="#auth_received_control_message_auth_failed">AUTH: Received control message: AUTH_FAILED</a></li>
</ul>
<h2 id="the_container_runs_but_i_cant_access_the_web_ui">The container runs, but I can't access the web UI<a class="headerlink" href="#the_container_runs_but_i_cant_access_the_web_ui" title="Permanent link">&para;</a></h2>
<p><a href="https://github.com/haugene/docker-transmission-openvpn/issues/1558">TODO</a>: Short explanation and link to <a href="../vpn-networking/">networking</a></p>
<h2 id="how_do_i_enable_authentication_in_the_web_ui">How do I enable authentication in the web UI<a class="headerlink" href="#how_do_i_enable_authentication_in_the_web_ui" title="Permanent link">&para;</a></h2>
<p>You can do this either by setting the appropriate fields in <code>settings.json</code> which is
found in TRANSMISSION_HOME which defaults to <code>/config/transmission-home</code> so it will be available
on your host where you mount the <code>/config</code> volume. Remember that Transmission overwrites the config
when it shuts down, so do this when the container is not running.</p>
<p>Or you can set it using the convenience environment variables. They will then override the settings
on every container startup. The environment variables you have to set are:</p>
<ul>
<li><code>TRANSMISSION_RPC_USERNAME=username</code></li>
<li><code>TRANSMISSION_RPC_PASSWORD=password</code></li>
<li><code>TRANSMISSION_RPC_AUTHENTICATION_REQUIRED=true</code></li>
</ul>
<p>PS: Be cautious of special characters in the username or password. We've had multiple errors with
that and have not provided a fix yet. Escaping special characters could be an option, but the
easiest solution is just to avoid them. Make the password longer instead ;)
Or write it into <code>settings.json</code> manually as first described.
Also, look up differences between how <a href="https://support.asg.com/mob/mvw/10_0/mv_ag/using_quotes_with_yaml_special_characters.htm">yaml special characters</a> are escaped vs <a href="https://github.com/haugene/docker-transmission-openvpn/issues/1767">in docker run</a></p>
<p>Docker secrets are also supported for the rpc credentials. To use a secret, remove both the <code>TRANSMISSION_RPC_USERNAME</code> and <code>TRANSMISSION_RPC_PASSWORD</code> environment variables and add a secret named <code>rpc_creds</code>. The secret file must contain two lines, the first line is the username and the second line is the password. Then just add it as a secret to docker, and it will be picked up automatically. This is why the name of the secret is important.</p>
<h2 id="how_do_i_verify_that_my_traffic_is_using_vpn">How do I verify that my traffic is using VPN<a class="headerlink" href="#how_do_i_verify_that_my_traffic_is_using_vpn" title="Permanent link">&para;</a></h2>
<p>There are many ways of doing this, and I welcome you to add to this list if you have any suggestions.</p>
<p>You can exec into the container and through the shell use <code>curl</code> to ask for your public IP. There are
multiple endpoints for this but here are a few suggestions:</p>
<ul>
<li><code>curl http://ipinfo.io/ip</code></li>
<li><code>curl http://ipecho.net/plain</code></li>
<li><code>curl icanhazip.com</code></li>
</ul>
<p>Example command: <code>docker exec &lt;container-name&gt; curl --silent "http://ipinfo.io/ip"</code></p>
<p>Or you could use a test torrent service to download a torrent file and then you can get the IP from that tracker.</p>
<ul>
<li>http://ipmagnet.services.cbcdn.com/</li>
<li>https://torguard.net/checkmytorrentipaddress.php</li>
</ul>
<h2 id="rtnetlink_answers_file_exists">RTNETLINK answers: File exists<a class="headerlink" href="#rtnetlink_answers_file_exists" title="Permanent link">&para;</a></h2>
<p><a href="https://github.com/haugene/docker-transmission-openvpn/issues/1558">TODO</a>: Conflicting LOCAL_NETWORK values. Short explanation and link to <a href="../vpn-networking/">networking</a></p>
<h2 id="rtnetlink_answers_invalid_argument">RTNETLINK answers: Invalid argument<a class="headerlink" href="#rtnetlink_answers_invalid_argument" title="Permanent link">&para;</a></h2>
<p>This can occur because you have specified an invalid <strong>subnet</strong> or possibly specified an IP Address in CIDR format instead of a subnet. Your LOCAL_NETWORK property must be aimed at a <strong>subnet</strong> and not at an IP Address. </p>
<p>A valid example would be</p>
<pre><code> ```
 LOCAL_NETWORK=10.80.0.0/24
 ```
</code></pre>
<p>but an invalid target route that would cause this error might be </p>
<pre><code> ```
 #Invalid because the subnet for this range would be 10.20.30.0/24
 LOCAL_NETWORK=10.20.30.45/24
 ```
</code></pre>
<p>To check your value, you can use a <a href="https://www.calculator.net/ip-subnet-calculator.html">subnet calculator</a>. 
* Enter your IP Address - the portion before the mask, <code>10.20.30.45</code> here
* Select the subnet that matches - the <code>/24</code> portion here
* Take the Network Address that is returned - <code>10.20.30.0</code> in this case </p>
<h2 id="tunsetiff_tun_operation_not_permitted">TUNSETIFF tun: Operation not permitted<a class="headerlink" href="#tunsetiff_tun_operation_not_permitted" title="Permanent link">&para;</a></h2>
<p>This is usually a question of permissions. Have you set the <a href="https://docs.docker.com/engine/reference/run/#runtime-privilege-and-linux-capabilities">NET_ADMIN capabilities</a> to the container? What if you use <code>docker run --privileged</code>, do you still get that error?</p>
<p>This is an error where we haven't got too much information. If the hints above get you nowhere, create an issue.</p>
<h2 id="error_resolving_host_address">Error resolving host address<a class="headerlink" href="#error_resolving_host_address" title="Permanent link">&para;</a></h2>
<p>This error can happen at multiple places in the scripts. The most common is that it happens with <code>curl</code> trying to download the latest .ovpn
config bundle for those providers that have an update script, or that OpenVPN throws the error when trying to connect to the VPN server.</p>
<p>The curl error looks something like <code>curl: (6) Could not resolve host: ...</code> and OpenVPN says <code>RESOLVE: Cannot resolve host address: ...</code>.
Either way, the problem is that your container does not have a valid DNS setup. We have two recommended ways of addressing this.</p>
<p>The first solution is to use the <code>dns</code> option offered by Docker. This is available in
<a href="https://docs.docker.com/engine/reference/run/#network-settings">Docker run</a> as well as
<a href="https://docs.docker.com/compose/compose-file/#dns">Docker Compose</a>. You can add <code>--dns 8.8.8.8 --dns 8.8.4.4</code> to use Google DNS servers.
Or add the corresponding block in docker-compose.yml:</p>
<pre><code>  dns:
    - 8.8.8.8
    - 8.8.4.4
</code></pre>
<p>You can of course use any DNS servers you want here. Google servers are popular. So is Cloudflare DNS.</p>
<p>The second approach is to use some environment variables to override <code>/etc/resolv.conf</code> in the container.
Using the same DNS servers as in the previous approach you can set:</p>
<pre><code>OVERRIDE_DNS_1=8.8.8.8
OVERRIDE_DNS_2=8.8.4.4
</code></pre>
<p>This will be read by the startup script and it will override the contents of <code>/etc/resolv.conf</code> accordingly. You can have one
or more of these servers and they will be sorted alphabetically.</p>
<p><strong>What is the difference between these solutions?</strong></p>
<p>A good question as they both seem to override what DNS servers the container should use. However, they are not equal.</p>
<p>The first solution uses the dns flags from Docker. This will mean that we instruct Docker to use these DNS servers for the container,
but the resolv.conf file in the container will still point to the Docker DNS service. Docker might have many reasons for this but one of
them is at least for service discovery. If you're running your container as a part of a larger docker-compose file or custom docker network
and you want to be able to lookup the other containers based on their service names then you need to use the Docker DNS service.
By using the <code>--dns</code> flags you should have both control of what DNS servers are used for external requests as well as container DNS lookup.</p>
<p>The second solution is more direct. It rewrites the resolv.conf file so that it no longer refers to the Docker DNS service.
The effect of this is that you lose Docker service discovery from the container (other containers in the same network can still resolve it)
but you have cut out a middleman and potential point of error. I'm not sure why this sometimes is necessary but it has proven to fix
the issue in some cases.</p>
<p><strong>A possible third option</strong></p>
<p>If you're facing the OpenVPN error (not curl) then your provider might have config files with IP addresses instead of DNS.
That way your container won't need DNS to do a lookup for the server. Note that the trackers will still need DNS, so this will only
solve the problem for you if it is your local network that in some way is blocking the DNS.</p>
<h2 id="container_loses_connection_after_some_time">Container loses connection after some time<a class="headerlink" href="#container_loses_connection_after_some_time" title="Permanent link">&para;</a></h2>
<p>For some users, on some platforms, this is an issue. I have not encountered this myself - but there is no doubt that it's recurring.
Why does the container lose connectivity? That we don't know and it could be many different reasons that manifest the same symptoms.
We do however have some possible solutions.</p>
<h3 id="set_the_ping-exit_option_for_openvpn_and_restart-flag_in_docker">Set the ping-exit option for OpenVPN and restart-flag in Docker<a class="headerlink" href="#set_the_ping-exit_option_for_openvpn_and_restart-flag_in_docker" title="Permanent link">&para;</a></h3>
<p>Most provider configs have a ping-restart option set. So if the tunnel fails, OpenVPN will restart and re-connect. That works well on regular systems.
The problem is that if the container has lost internet connection restarting OpenVPN will not fix anything. What you can do though is to set/override
this option using <code>OPENVPN_OPTS=--inactive 3600 --ping 10 --ping-exit 60</code>. This will tell OpenVPN to exit when it cannot ping the server for 1 minute.</p>
<p>When OpenVPN exits, the container will exit. And if you've then set <code>restart=always</code> or <code>restart=unless-stopped</code> in your Docker config then Docker will
restart the container and that could/should restore connectivity. VPN providers sometimes push options to their clients after they connect. This is visible
in the logs if they do. If they push ping-restart that can override your settings. So you could consider adding <code>--pull-filter ignore ping</code> to the options above.</p>
<p>This approach will probably work, especially if you're seeing logs like these from before:</p>
<pre><code>Inactivity timeout (--ping-restart), restarting
SIGUSR1[soft,ping-restart] received, process restarting
</code></pre>
<h3 id="use_a_third-party_tool_to_monitor_and_restart_the_container">Use a third-party tool to monitor and restart the container<a class="headerlink" href="#use_a_third-party_tool_to_monitor_and_restart_the_container" title="Permanent link">&para;</a></h3>
<p>The container has a health check script that is run periodically. It will report the health status to Docker and the container will show as "unhealthy"
if basic network connectivity is broken. You can write your own script and add it to cron, or you can use a tool like <a href="https://github.com/willfarrell/docker-autoheal">https://github.com/willfarrell/docker-autoheal</a> to look for and restart unhealthy containers.</p>
<p>This container has the <code>autoheal</code> label by default so it is compatible with the <a href="https://hub.docker.com/r/willfarrell/autoheal/">willfarrell/autoheal image</a></p>
<h2 id="send_username_and_password_via_a_file">Send Username and Password via a file<a class="headerlink" href="#send_username_and_password_via_a_file" title="Permanent link">&para;</a></h2>
<p>Depending on your setup, you may not want to send your VPN user/pass via environment variables (the main reason being, it is accessible via docker inspect). If you prefer, there are two methods of avoiding credentials to be set via environment variables:
 - Option 1: Configure the container to use a file. 
 - Option 2: Configure the container to use a <code>secret</code>. (Only available for Docker Swarm)</p>
<p><em>Procedure for Option 1: Configuring the container to use a file</em>
1. Create a text file with a username and password in it, each on a separate line.
For this example, we will assume it is located at <code>./openvpn-credentials.txt</code></p>
<pre><code>this_is_my_username
this_is_my_password
</code></pre>
<ol>
<li>
<p>Set the Environment Variable for username/password to exactly: <code>**None**</code></p>
</li>
<li>
<p>Mount the file in this exact path: <code>/config/openvpn-credentials.txt</code></p>
</li>
</ol>
<p>Config example:</p>
<pre><code>$ docker run --cap-add=NET_ADMIN -d \
              -v /your/storage/path/:/data \
              -v ./openvpn-credentials.txt:/config/openvpn-credentials.txt \
              -e OPENVPN_PROVIDER=PIA \
              -e OPENVPN_CONFIG=france \
              -e OPENVPN_USERNAME=**None** \
              -e OPENVPN_PASSWORD=**None** \
              -e LOCAL_NETWORK=192.168.0.0/16 \
              --log-driver json-file \
              --log-opt max-size=10m \
              -p 9091:9091 \
              haugene/transmission-openvpn
</code></pre>
<p>The example docker-compose.yml looks like this:</p>
<pre><code>version: '3.3'
services:
    transmission-openvpn:
        cap_add:
            - NET_ADMIN
        volumes:
            - '/your/storage/path/:/data'
            - './openvpn-credentials.txt:/config/openvpn-credentials.txt'
        environment:
            - OPENVPN_PROVIDER=PIA
            - OPENVPN_CONFIG=france
            - OPENVPN_USERNAME=**None**
            - OPENVPN_PASSWORD=**None**
            - LOCAL_NETWORK=192.168.0.0/16
        logging:
            driver: json-file
            options:
                max-size: 10m
        ports:
            - '9091:9091'
        image: haugene/transmission-openvpn
</code></pre>
<p><em>Procedure for Option 2: Configure the container to use a <code>secret</code></em></p>
<p>Note: <a href="https://docs.docker.com/engine/swarm/secrets/">Docker Secrets</a> are only available for Docker Swarm (<code>docker-compose</code>). If you run the container standalone, refer to Option 1.</p>
<ol>
<li>Create a text file with a username and password in it, each on a separate line.
For this example, we will assume it is located at <code>./openvpn-credentials.txt</code></li>
</ol>
<pre><code>this_is_my_username
this_is_my_password
</code></pre>
<ol>
<li>Mount the file as a secret like below. *The name of the secret must be exactly <code>openvpn_creds</code>, which will be exposed to the container at <code>/run/secrets/openvpn_creds</code>.</li>
</ol>
<p>The example docker-compose.yml looks like this:</p>
<pre><code>version: '3.3'
secrets:
  openvpn_creds:
    file: './openvpn-credentials.txt'
services:
    transmission-openvpn:
        cap_add:
            - NET_ADMIN
        volumes:
            - '/your/storage/path/:/data'
        environment:
            - OPENVPN_PROVIDER=PIA
            - OPENVPN_CONFIG=france
            - OPENVPN_USERNAME=**None**
            - OPENVPN_PASSWORD=**None**
            - LOCAL_NETWORK=192.168.0.0/16
        logging:
            driver: json-file
            options:
                max-size: 10m
        secrets:
            - openvpn_creds
        ports:
            - '9091:9091'
        image: haugene/transmission-openvpn
</code></pre>
<p>Bonus tip: The same steps can be followed for <code>rpc_creds</code>, as shown in [<a href="#how_do_i_enable_authentication_in_the_web_UI">How do I enable authentication in the web ui</a>].</p>
<h2 id="auth_received_control_message_auth_failed">AUTH: Received control message: AUTH_FAILED<a class="headerlink" href="#auth_received_control_message_auth_failed" title="Permanent link">&para;</a></h2>
<p>If your logs end like this, the wrong username/password was sent to your VPN provider.</p>
<pre><code>AUTH: Received control message: AUTH_FAILED
SIGTERM[soft,auth-failure] received, process exiting
</code></pre>
<p>We can divide the possible errors here into three. You have entered the wrong credentials, the server has some kind of error or the container has messed
up your credentials. We have had challenges with special characters. Having "?= as part of your password has tripped up our scripts from time to time.</p>
<p><strong>NOTE</strong> Some providers have multiple sets of credentials. Some for OpenVPN, others for web login, proxy solutions, etc.
Make sure that you use the ones intended for OpenVPN. <strong>PIA users:</strong> this has recently changed. It used to be a separate pair, but now
you should use the same login as you do in the web control panel. Before you were supposed to use a username like x12345, now it's the p12345 one. There is also a 99 character limit on password length.</p>
<p>First, check that your credentials are correct. Some providers have separate credentials for OpenVPN so it might not be the same as for their apps.
Secondly, test a few different servers just to make sure that it's not just a faulty server. If this doesn't resolve it, it's probably the container.</p>
<p>To verify this you can mount a volume to <code>/config</code> in the container. So for example <code>/temporary/folder:/config</code>. Your credentials will be written to
<code>/config/openvpn-credentials.txt</code> when the container starts, more on that <a href="../building-blocks/#starting_openvpn">here</a>. So by mounting this folder
you will be able to check the contents of that text file. The first line should be your username, the second should be your password.</p>
<p>This file is what's passed to OpenVPN. If your username/password is correct here then you should probably contact your provider.</p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.dfff1995.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.dff1b7c8.min.js"></script>
      
    
  </body>
</html>